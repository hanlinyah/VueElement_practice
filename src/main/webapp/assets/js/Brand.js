Vue.createApp({
    data(){
        return{
            username:"",
            insertupdatestatus:0,
            editdatadisplay:0,
            brands:[],
            brand:{
                id:"",
                brandName:"",
                companyName:"",
                ordered:"",
                description:"",
                status:""
            }
        }
    },
    methods:{
        getusername(){
            axios.get("http://localhost:8080/VueElement_practice_war/User/loginState").then(
                resp=>(this.username=resp.data)
            )
        },
        newbrand(){
            this.editdatadisplay=1;
            this.insertupdatestatus=1;
        },
        submitBrand(){
            if(this.insertupdatestatus==1){
                this.brand.id="";
                axios.post("http://localhost:8080/VueElement_practice_war/Brand/Insert",this.brand).then(
                    resp=>{
                        if(resp.data=="success"){
                            this.showalldata();
                            this.clearedit();
                            alert("新增成功");
                        }
                    }
                )
            }
            if (this.insertupdatestatus==2){
                axios.post("http://localhost:8080/VueElement_practice_war/Brand/Update",this.brand).then(
                    resp=>{
                        if(resp.data=="success"){
                            this.showalldata();
                            this.clearedit();
                            alert("修改成功");
                        }
                    }
                )
            }
        },
        cancleedit(){
            this.clearedit();
            this.editdatadisplay=0;
            this.insertupdatestatus=0;
        },
        clearedit(){
            this.brand={
                id:"",
                brandName:"",
                companyName:"",
                ordered:"",
                description:"",
                status:""
            };
        },
        Updatedata(id){
            this.insertupdatestatus=2;
            axios.post("http://localhost:8080/VueElement_practice_war/Brand/selectById",id).then(
                resp=>(this.brand=resp.data)
            )
            this.editdatadisplay=1;
        },
        DeleteData(id){
            axios.post("http://localhost:8080/VueElement_practice_war/Brand/DeleteById",id).then(
                resp=>{
                    if(resp.data=="success"){
                        this.showalldata();
                        alert("刪除成功");
                    }
                }
            )
        },
        showalldata(){
            axios.get("http://localhost:8080/VueElement_practice_war/Brand/selectAll").then(
                resp=>(this.brands=resp.data)
            )
        }
    },
    mounted(){
        this.getusername();
        this.showalldata();
    }
}).mount('#showalldatawithvue');